<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Cook-E: Scheduling for Multiple Recipes</title>

        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="jumbotron">
            <div class="container">
                <h1>Cook-E</h1>
                <p>A mobile application that helps schedule cooking with multiple recipes</p>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h2>Download</h2>
                    <p><a href="https://github.com/Cook-E-team/Cook-E/releases/latest" class="btn btn-primary btn-lg" role="button" id="download-link">Latest Release</a></p>
                    <p><a href="https://github.com/Cook-E-team/Cook-E/releases">Other Releases</a></p>
                    <p>Supports Android 4.0 and later</p>
                </div>
                <div class="col-md-6">
                    <h2>Install</h2>
                    <ol>
                        <li>Open this web page on your device</li>
                        <li>Download the application</li>
                        <li>Follow the prompts to install</li>
                    </ol>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <h2>Use</h2>
                    <p>Documentation will be available soon.</p>
                </div>
                <div class="col-md-6">
                    <h2>Develop</h2>
                    <p><a href="https://cook-e-team.github.io/Cook-E/">Developer page</a></p>
                </div>
            </div>
        </div>

    <script type="text/javascript">
    var updateRelease = function(releases) {
        var downloadLink = document.getElementById('download-link');
        if (!downloadLink) { return; }

        var latest = releases[0];
        if (latest) {
            // Set version text and link to release
            downloadLink.textContent = 'Download ' + latest.name;
            downloadLink.href = latest.html_url;

            var asset = latest.assets[0];
            if (asset && asset.content_type == 'application/vnd.android.package-archive') {
                // Change link to download the APK directly
                downloadLink.href = asset.browser_download_url;
            }
        }
    }

    var releaseInfoUrl = 'https://api.github.com/repos/Cook-E-team/Cook-E/releases';
    var request = new XMLHttpRequest();

    request.onreadystatechange = function() {
        if (request.readyState == XMLHttpRequest.DONE && (request.status == 200 || request.status == 304)) {
            updateRelease(JSON.parse(request.response));
        }
    };
    request.open('GET', releaseInfoUrl);
    request.send();

    </script>
    </body>
</html>
