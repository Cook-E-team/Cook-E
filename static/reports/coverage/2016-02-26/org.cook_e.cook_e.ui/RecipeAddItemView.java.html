<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>RecipeAddItemView.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debug</a> &gt; <a href="index.source.html" class="el_package">org.cook_e.cook_e.ui</a> &gt; <span class="el_source">RecipeAddItemView.java</span></div><h1>RecipeAddItemView.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2016 the Cook-E development team
 *
 * This file is part of Cook-E.
 *
 * Cook-E is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Cook-E is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Cook-E.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */

package org.cook_e.cook_e.ui;

import android.content.Context;
import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.util.AttributeSet;
import android.view.Gravity;
import android.view.View;
import android.widget.ImageButton;
import android.widget.LinearLayout;
import android.widget.TextView;

import org.cook_e.cook_e.R;
import org.cook_e.data.Objects;

/**
 * A view that shows a recipe and allows it to be added to something
 */
public class RecipeAddItemView extends LinearLayout {

    /**
     * An interface for listeners to respond to requests from the user to add a recipe
     */
    public interface RecipeAddListener {
        /**
         * Called when the user asks that a recipe be added
         */
        void recipeAddRequested();
    }

    /**
     * Padding in this view
     */
    private static final int PADDING = 15;

    /**
     * The text view that displays the title
     */
    private TextView mTitleView;
    /**
     * The button used to add the recipe
     */
    private ImageButton mAddButton;
    /**
     * The context used to get resources
     */
    private Context mContext;

    /**
     * The recipe add listener, or null if none is present
     */
    @Nullable
    private RecipeAddListener mAddListener;

    public RecipeAddItemView(Context context) {
<span class="nc" id="L75">        super(context);</span>
<span class="nc" id="L76">        initRecipeAddItemView(context);</span>
<span class="nc" id="L77">    }</span>

    public RecipeAddItemView(Context context, AttributeSet attrs) {
<span class="nc" id="L80">        super(context, attrs);</span>
<span class="nc" id="L81">        initRecipeAddItemView(context);</span>
<span class="nc" id="L82">    }</span>

    public RecipeAddItemView(Context context, AttributeSet attrs, int defStyleAttr) {
<span class="nc" id="L85">        super(context, attrs, defStyleAttr);</span>
<span class="nc" id="L86">        initRecipeAddItemView(context);</span>
<span class="nc" id="L87">    }</span>

    private void initRecipeAddItemView(Context context) {
<span class="nc" id="L90">        setOrientation(HORIZONTAL);</span>
<span class="nc" id="L91">        setPadding(PADDING, PADDING, PADDING, PADDING);</span>
<span class="nc" id="L92">        mContext = context;</span>

<span class="nc" id="L94">        mTitleView = new TextView(context, null, android.R.attr.textAppearanceLarge);</span>
<span class="nc" id="L95">        mTitleView.setText(R.string.recipe);</span>

<span class="nc" id="L97">        mAddButton = new ImageButton(context, null, android.R.attr.borderlessButtonStyle);</span>
<span class="nc" id="L98">        mAddButton.setMinimumWidth(1);</span>
<span class="nc" id="L99">        mAddButton.setMaxWidth(10);</span>
<span class="nc" id="L100">        enableAddButton();</span>

<span class="nc" id="L102">        mAddButton.setOnClickListener(new OnClickListener() {</span>
            @Override
            public void onClick(View v) {
<span class="nc" id="L105">                disableAddButton();</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">                if (mAddListener != null) {</span>
<span class="nc" id="L107">                    mAddListener.recipeAddRequested();</span>
                }
<span class="nc" id="L109">            }</span>
        });

<span class="nc" id="L112">        final LayoutParams titleParams = new LayoutParams(LayoutParams.MATCH_PARENT,</span>
                LayoutParams.WRAP_CONTENT, 0.9f);
<span class="nc" id="L114">        titleParams.gravity = Gravity.CENTER_VERTICAL | Gravity.START;</span>
<span class="nc" id="L115">        addView(mTitleView, titleParams);</span>
<span class="nc" id="L116">        addView(mAddButton,</span>
                new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 0.1f));


        // Tapping the list entry adds the recipe, as if the add button were pressed
<span class="nc" id="L121">        this.setOnClickListener(new OnClickListener() {</span>
            @Override
            public void onClick(View v) {
<span class="nc" id="L124">                mAddButton.performClick();</span>
<span class="nc" id="L125">            }</span>
        });
<span class="nc" id="L127">    }</span>

    /**
     * Sets the recipe title to display
     *
     * If the new title is not equal to the current title, this method also resets the add button
     * to its default state.
     *
     * @param title the title
     * @throws NullPointerException if title is null
     */
    public void setTitle(@NonNull String title) {
<span class="nc" id="L139">        Objects.requireNonNull(title, &quot;title must not be null&quot;);</span>

<span class="nc" id="L141">        final String currentTitle = mTitleView.getText().toString();</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">        if (!currentTitle.equals(title)) {</span>
<span class="nc" id="L143">            enableAddButton();</span>
        }

<span class="nc" id="L146">        mTitleView.setText(title);</span>
<span class="nc" id="L147">    }</span>

    /**
     * Enables the add button and sets it to display an add icon
     */
    private void enableAddButton() {
<span class="nc" id="L153">        mAddButton.setImageDrawable(</span>
<span class="nc" id="L154">                mContext.getResources().getDrawable(R.drawable.ic_add_box_black_24dp));</span>
<span class="nc" id="L155">        mAddButton.setEnabled(true);</span>
<span class="nc" id="L156">    }</span>

    /**
     * Disables the add button and sets it to display a check mark icon
     */
    public void disableAddButton() {
<span class="nc" id="L162">        mAddButton.setImageDrawable(</span>
<span class="nc" id="L163">                mContext.getResources().getDrawable(R.drawable.ic_check_box_black_24dp));</span>
<span class="nc" id="L164">        mAddButton.setEnabled(false);</span>
<span class="nc" id="L165">    }</span>

    /**
     * Sets the listener to be notified when the user asks to add the displayed recipe
     *
     * @param addListener the listener, or null to set no listener
     */
    public void setAddListener(@Nullable RecipeAddListener addListener) {
<span class="nc" id="L173">        mAddListener = addListener;</span>
<span class="nc" id="L174">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.4.201502262128</span></div></body></html>